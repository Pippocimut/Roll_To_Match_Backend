<script
    src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDOZA_T4M1m-jPGRqev61QMDtxOFZS6Blo&libraries=places&callback=initAutocomplete"
    async defer>
    </script>
<input id="autocomplete" name="address" placeholder="Enter a location" type="text" required></input>
<input id="lat" name="lat" type="hidden"></input>
<input id="lng" name="lng" type="hidden"></input>
<script>
    async function initAutocomplete() {
        const input = document.getElementById('autocomplete');

        const autocomplete = new google.maps.places.Autocomplete(input);
        autocomplete.addListener('place_changed', () => {
            const place = autocomplete.getPlace();
            const latField = document.getElementById('lat');
            const lngField = document.getElementById('lng');
            if (place.geometry) {
                latField.value = place.geometry.location.lat();
                lngField.value = place.geometry.location.lng();
            }
        });
    }
    initAutocomplete();
</script>